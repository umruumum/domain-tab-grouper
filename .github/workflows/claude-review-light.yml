name: Claude Light Review (Disabled)

on:
  # Disabled - use claude-simple-review.yml instead
  workflow_dispatch:

jobs:
  claude-light-review:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
      id-token: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 2

      - name: Check if review should run
        id: check-review
        run: |
          # Simple check for changed files
          CHANGED_FILES=$(git diff --name-only HEAD~1 HEAD | grep -E '\.(js|html|json)$' | wc -l)
          
          if [ "$CHANGED_FILES" -eq 0 ]; then
            echo "No relevant files changed, skipping review"
            echo "should_run=false" >> $GITHUB_OUTPUT
          else
            echo "Found $CHANGED_FILES files to review"
            echo "should_run=true" >> $GITHUB_OUTPUT
          fi

      - name: Run Lightweight Claude Review
        if: steps.check-review.outputs.should_run == 'true'
        uses: anthropics/claude-code-action@v0.0.24
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
          
          # Use Claude Haiku for faster, cheaper reviews
          model: "claude-3-haiku-20240307"
          
          # Lightweight review prompt
          direct_prompt: |
            ã“ã®Chromeæ‹¡å¼µæ©Ÿèƒ½ã®å¤‰æ›´ã‚’ç°¡æ½”ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„ï¼š

            ãƒã‚§ãƒƒã‚¯é …ç›®ï¼š
            - ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã¯ãªã„ã‹
            - ğŸ› æ˜ã‚‰ã‹ãªãƒã‚°ã¯ãªã„ã‹  
            - âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œã¯ãªã„ã‹
            - ğŸ¯ Chromeæ‹¡å¼µæ©Ÿèƒ½ã®ä»•æ§˜é•åã¯ãªã„ã‹

            ç°¡æ½”ãªæ—¥æœ¬èªã§è¦ç‚¹ã®ã¿ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚